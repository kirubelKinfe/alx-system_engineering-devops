# ALX System Engineering DevOps - HTTPS/SSL Tasks

This repository contains solutions for two tasks related to domain configuration and SSL termination using HAproxy, as part of the ALX System Engineering DevOps curriculum.

## Repository Structure
- **GitHub Repository**: `alx-system_engineering-devops`
- **Directory**: `0x10-https_ssl`
- **Files**:
  - `0-world_wide_web`: Bash script to display subdomain information
  - `1-haproxy_ssl_termination`: HAproxy configuration file for SSL termination

## Task 0: World Wide Web

### Description
This task involves configuring a domain zone with specific subdomains (`www`, `lb-01`, `web-01`, `web-02`) and creating a Bash script to display information about these subdomains, including their A record and destination IP.

### Files
- `0-world_wide_web`: A Bash script that uses `dig` and `awk` to query DNS records and output subdomain information.

### Requirements
- Add A records for the following subdomains in your DNS provider's control panel:
  - `13.221.73.254` → Load balancer IP
  - `lb-01.3.82.236.254	` → Load balancer IP
  - `web-01.54.224.98.142	` → Web server 01 IP
  - `web-02.3.80.133.14` → Web server 02 IP
- The script accepts two arguments:
  - `domain` (mandatory): The domain name to audit (e.g., `holberton.online`)
  - `subdomain` (optional): A specific subdomain to audit (e.g., `web-02`)
- Output format: `The subdomain [SUB_DOMAIN] is a [RECORD_TYPE] record and points to [DESTINATION]`
- If no subdomain is provided, the script checks `www`, `lb-01`, `web-01`, and `web-02` in that order.
- Uses `awk` and at least one Bash function.
- Ignores shellcheck case SC2086.

### Setup
1. Ensure `dig` is installed:
   ```bash
   sudo apt-get update
   sudo apt-get install dnsutils
   ```
2. Save the script as `0-world_wide_web` and make it executable:
   ```bash
   chmod +x 0-world_wide_web
   ```

### Usage
- To check all default subdomains:
  ```bash
  ./0-world_wide_web holberton.online
  ```
  **Example Output**:
  ```
  The subdomain www is a A record and points to 54.210.47.110
  The subdomain lb-01 is a A record and points to 54.210.47.110
  The subdomain web-01 is a A record and points to 34.198.248.145
  The subdomain web-02 is a A record and points to 54.89.38.100
  ```
- To check a specific subdomain:
  ```bash
  ./0-world_wide_web holberton.online web-02
  ```
  **Example Output**:
  ```
  The subdomain web-02 is a A record and points to 54.89.38.100
  ```

## Task 1: HAproxy SSL Termination

### Description
This task configures HAproxy to handle SSL termination for the `www` subdomain, redirecting HTTP to HTTPS and serving encrypted traffic that returns a page containing "ALX" from the root of the web server.

### Files
- `1-haproxy_ssl_termination`: HAproxy configuration file (`/etc/haproxy/haproxy.cfg`)

### Requirements
- HAproxy must listen on TCP port 443.
- HAproxy must accept SSL traffic using a certificate generated by `certbot`.
- HAproxy must redirect HTTP to HTTPS.
- The root (`/`) of the domain must return a page containing "ALX".
- Requires HAproxy version 1.5 or higher.

### Setup
1. Install HAproxy (version 1.5 or higher):
   ```bash
   sudo apt-get update
   sudo apt-get install haproxy
   ```
2. Install `certbot` for SSL certificate generation:
   ```bash
   sudo apt-get install certbot
   ```
3. Generate an SSL certificate for your domain:
   ```bash
   sudo certbot certonly --standalone -d www.yourdomain.com
   ```
4. Combine the certificate and private key:
   ```bash
   sudo cat /etc/letsencrypt/live/www.yourdomain.com/fullchain.pem \
   /etc/letsencrypt/live/www.yourdomain.com/privkey.pem \
   > /etc/letsencrypt/live/www.yourdomain.com/fullchain.pem
   ```
5. Save the provided HAproxy configuration as `1-haproxy_ssl_termination` and copy it to `/etc/haproxy/haproxy.cfg`:
   ```bash
   sudo cp 1-haproxy_ssl_termination /etc/haproxy/haproxy.cfg
   ```
6. Test and reload HAproxy:
   ```bash
   sudo haproxy -c -f /etc/haproxy/haproxy.cfg
   sudo systemctl restart haproxy
   ```
7. Ensure your web servers (`web-01` and `web-02`) serve a page at `/` containing "ALX".

### Usage
- Verify HTTPS access:
  ```bash
  curl -sI https://www.yourdomain.com
  ```
  **Expected Output**:
  ```
  HTTP/1.1 200 OK
  Server: nginx/1.4.6 (Ubuntu)
  ...
  ```
- Check page content:
  ```bash
  curl https://www.yourdomain.com
  ```
  **Expected Output**:
  ```
  ALX for the win!
  ```

### Notes
- Replace `yourdomain.com` with your actual domain name.
- Update `<web-01-ip>` and `<web-02-ip>` in the HAproxy configuration with your actual web server IPs.
- Ensure proper file permissions (e.g., `644` for the HAproxy config file).
- HAproxy must have read access to the SSL certificate.
- The web servers should be configured to serve unencrypted traffic on port 80.

## General Notes
- Ensure your DNS records are correctly configured before running the script or setting up HAproxy.
- Test all configurations thoroughly to avoid downtime.
- The Bash script does not handle edge cases like empty parameters or nonexistent domains/subdomains, as per the requirements.

